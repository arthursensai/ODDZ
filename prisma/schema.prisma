generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Player {
  id       Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  email    String   @unique
  username String
  isOnline Boolean
  inGame Boolean
  color Color
  games    Game[]   @relation("PlayerGames")
  wins     Game[]   @relation("GameWinner")
}

model Game {
  id        String      @id @default(cuid())
  createdAt DateTime    @default(now())
  roomID    String @unique
  name      String
  status    GameStatus  @default(WAITING)
  players   Player[]    @relation("PlayerGames")
  winnerId  Int?        // reference to Player.id
  winner    Player?     @relation("GameWinner", fields: [winnerId], references: [id])
}

enum GameStatus {
  WAITING
  IN_PROGRESS
  FINISHED
}

enum Color {
  BRIGHT_CYAN    // "#00c2ff"
  GREEN          // "#00bf63"
  ORANGE         // "#ff914d"
  RED            // "#ff5757"
  PURPLE         // "#6a0dad"
  YELLOW         // "#f9d71c"
  PINK           // "#ff6f91"
  DODGER_BLUE    // "#1e90ff"
  FOREST_GREEN   // "#228b22"
  ORANGE_STD     // "#ffa500"
  ORANGE_RED     // "#ff4500"
  DARK_RED       // "#8b0000"
}